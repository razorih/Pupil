var fs = require("fs"); // Require Filesystem for loading the library
var vm = require("vm"); // Require Virtual Machine so we can execute code without eval()

filedata = fs.readFileSync("./node_modules/pupil/pupil-lib/PupilFull.js", "utf-8");

//eval(filedata); // This is evil

var fakewindow = {
    window: {} // Create a fake window object for pupil to work on
};

var pupilscript = vm.createScript(filedata); // Compile Pupil as vm.Script...
var result = pupilscript.runInNewContext(fakewindow); // ... and execute it in fakewindow context

this.Pupil = fakewindow.window.Pupil; // Export